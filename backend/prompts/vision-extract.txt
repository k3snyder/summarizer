<instructions>
Analyze this document page image and extract ALL visual information that would not be captured by standard text extraction.
</instructions>

<approach>
1. SCAN: Identify what visual element types exist (charts, diagrams, tables, images)
2. EXTRACT: Pull exact values, labels, ALL text verbatim - including text boxes, callouts, legends, annotations, and notes within diagrams
3. VERIFY: Confirm each extraction is actually visible
4. RE-SCAN DIAGRAMS: Look again specifically for text boxes, callout annotations, legend items, and step descriptions - these are commonly missed
5. OUTPUT: Structure results in the format below
</approach>

<guardrails>
- Extract ONLY what is explicitly visible. NEVER interpolate or guess.
- If unclear, mark as [UNCLEAR: ~estimate] or omit entirely.
- Include missing/absent data as null, not fabricated values.
- Do not guess counts before observing. List items first, then count.
</guardrails>

<examples>
<example>
<input>
Document page with a bar chart showing quarterly revenue and an architecture diagram with callout boxes.
</input>
<output>
## Visual Elements Detected
bar chart, architecture diagram, callouts

## Charts & Data Visualizations

### Chart: Q3 2024 Revenue by Region
- **Type**: Horizontal bar chart
- **Axes**: X: Revenue ($M), 0-50; Y: Region names

| Region | Revenue |
|--------|---------|
| North America | $42.3M |
| EMEA | $31.7M |
| APAC | $28.1M |
| LATAM | [UNCLEAR: ~$12-15M] |

- **Legend**: None (single series)
- **Insights**: NA leads at $42.3M; LATAM value partially obscured

## Diagrams & Flowcharts

### Diagram: System Architecture
- **Type**: Architecture diagram

**Nodes:**
| ID | Label | Type | Visual |
|----|-------|------|--------|
| n1 | Client App | process | rectangle, blue |
| n2 | API Gateway | process | rectangle, green |
| n3 | Database | data store | cylinder, gray |

**Edges:**
| Source | Target | Relation | Label |
|--------|--------|----------|-------|
| n1 | n2 | ‚Üí | HTTPS |
| n2 | n3 | ‚Üí | Query |

**Groups/Boundaries:**
| Label | Contains | Visual |
|-------|----------|--------|
| Secure Zone | n2, n3 | dashed, red |

**Flow:** n1 ‚Üí n2 ‚Üí n3

**Text Annotations & Callouts:**
- **Callout boxes**: "Stateless operations. No data persisted in this layer."
- **Legend items**: "üîí Connections secured by TLS 1.3", "üìä Automated logging enabled"
- **Notes/Disclaimers**: "All data encrypted at rest and in transit"
- **Step descriptions**: "1. Client initiates request", "2. Gateway validates token", "3. Query executed"

## Verification
- Extracted values: 4 revenue figures (3 clear, 1 unclear)
- Node count: 3 listed, 3 visible ‚úì
- Edge count: 2 listed, 2 visible ‚úì
- Text annotations: 3 callout items, 2 legend items, 1 note, 3 steps ‚úì
</output>
</example>

<example>
<input>
Document page with body text and a company logo. No charts or diagrams.
</input>
<output>
## Visual Elements Detected
logo

## Images & Graphical Elements
- **Logo**: Acme Corp logo, top-left header, ~100x40px

## Verification
- Visual elements: 1 logo identified, 1 visible ‚úì
</output>
</example>
</examples>

---

<output_format>
Provide structured Markdown. **OMIT sections with no content** - never write "None detected."

## Visual Elements Detected
[One line: list types found - chart, diagram, table, image, or "none"]

## Charts & Data Visualizations

### Chart: [Title]
- **Type**: [bar/line/pie/scatter/histogram/area]
- **Axes**: [X: label, range; Y: label, range]

| [X-Label] | [Y-Label] |
|-----------|-----------|
| [exact value] | [exact value] |

- **Legend**: [items and meanings]
- **Insights**: [trends, peaks, comparisons - ONLY from visible data]

## Tables

### Table: [Title or context]
| Col 1 | Col 2 | Col 3 |
|-------|-------|-------|
| value | value | value |

- **Visual formatting**: [colors, highlights, merged cells]
- **Patterns**: [sorting, grouping, totals]

## Diagrams & Flowcharts

### Diagram: [Title]
- **Type**: [flowchart/architecture/network/sequence/org chart/process]

**Nodes:**
| ID | Label | Type | Visual |
|----|-------|------|--------|
| n1 | [exact text] | [category] | [shape/color] |

**Edges:**
| Source | Target | Relation | Label |
|--------|--------|----------|-------|
| n1 | n2 | [verb] | [text] |

**Groups/Boundaries:**
| Label | Contains | Visual |
|-------|----------|--------|
| [name] | n1, n2 | [dashed/solid, color] |

**Flow:** [if sequential: n1 ‚Üí n2 ‚Üí n3]

**Text Annotations & Callouts:**
[CRITICAL: Capture ALL text visible within the diagram that is not a node label]
- **Callout boxes**: [exact text from any text boxes, speech bubbles, or annotation boxes]
- **Legend items**: [text descriptions accompanying icons or symbols]
- **Notes/Disclaimers**: [any explanatory text, warnings, or footnotes within the diagram]
- **Step descriptions**: [numbered steps with their full text descriptions]
- **Boundary labels**: [full text labels on regions, zones, or boundaries]

## Images & Graphical Elements
- **Photos/Illustrations**: [subject, context, position]
- **Logos/Icons**: [identity, meaning, position]
- **Annotations**: [highlights, handwriting, stamps]
- **Layout**: [headers, sidebars, callouts]

## Numeric Data
[ALL visible numbers with context]
- **Percentages**: [value with label]
- **Currency**: [amount with context]
- **Measurements**: [value with unit]
- **Dates**: [specific dates/periods]
- **Counts**: [quantities with context]

## Verification
[Required - confirm your extractions]
- Extracted values: [count] items, [count] clearly visible, [count] unclear
- Nodes/rows counted: [X] listed, [X] visible
- Flagged items: [list any UNCLEAR markers]
</output_format>

---

<critical_rules>
1. **EXACT VALUES ONLY**
   ‚úÖ "Q1: $42,500, Q2: $51,200"
   ‚ùå "Sales showing growth trend"

2. **PRESERVE ORIGINAL TEXT**
   ‚úÖ Copy labels, titles verbatim
   ‚ùå Paraphrase or interpret

3. **NEVER HALLUCINATE**
   ‚úÖ "[UNCLEAR: ~20-25%]" or omit
   ‚ùå Inventing plausible numbers

4. **COUNT AFTER LISTING**
   ‚úÖ "Nodes: [list all]. Total: 4"
   ‚ùå "The four components are..."

5. **STRUCTURE OVER PROSE**
   ‚úÖ Node-edge tables for diagrams
   ‚ùå Paragraph descriptions of connections

6. **REPORT, DON'T INTERPRET**
   ‚úÖ "Red line shows 15% increase"
   ‚ùå "Company is performing well"

7. **VERIFY BEFORE OUTPUT**
   For each extraction, confirm: "Is this actually visible?" ‚Üí YES required

8. **CAPTURE ALL TEXT IN DIAGRAMS** (commonly missed!)
   ‚úÖ Extract text boxes: "Stateless operations. No customer data persisted."
   ‚úÖ Extract legends: "üîí Connections secured by HTTPS"
   ‚úÖ Extract step descriptions: "1. User initiates request from application"
   ‚úÖ Extract notes/disclaimers within diagram boundaries
   ‚ùå Only capturing node labels while ignoring callout boxes and annotations
</critical_rules>

<verification_protocol>
Before finalizing output, complete these checks:

‚ñ° Binary fact-check: Every value I listed is visible in the image
‚ñ° Count verification: Items counted AFTER listing, counts match
‚ñ° Label accuracy: Text copied character-by-character, watched for 0/O, 1/l/I
‚ñ° Completeness: Re-scanned image, no visual elements missed
‚ñ° Hallucination guard: No inferred data, no "filled in" blanks
‚ñ° TEXT WITHIN DIAGRAMS: Did I capture ALL text boxes, callouts, legends, notes, and annotations visible inside diagrams? (This is commonly missed!)
‚ñ° Boundary/region labels: Did I capture the FULL text of any labels on boundaries, zones, or regions?
</verification_protocol>

---

<text_only_page>
If no significant visual elements exist beyond plain text:

**No significant visual elements detected.**
</text_only_page>

<final_constraint>
OUTPUT ONLY the structured markdown above. No conversational text, apologies, or explanations outside the specified sections.
</final_constraint>
